if(void 0!==document.getElementById("curly-fomo-app")&&null!=document.getElementById("curly-fomo-app"))var CurlyFomoApp=new Vue({el:"#curly-fomo-app",data:{notifications:[],notifications_list:[],visible:!1,expired_hashes:[],notifications_limit:8,count:0,timeout:1e4,timeout_next:24e3,counter:2400,force:Cookies.get("CurlyFomoForce"),countires_codes:{AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran, Islamic Republic Of",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia, Federated States Of",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestinian Territory, Occupied",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"}},mounted:function(){0===this.expired_hashes.length&&this.getCookieHashes(),0===this.notifications.length&&this.getNotifications()},methods:{isTrue:function(i){return[!0,"true","yes","1",1,"on"].indexOf(i)>=0},getCountryName:function(i){var a=this;return!!a.countires_codes.hasOwnProperty(i.toUpperCase())&&a.countires_codes[i.toUpperCase()]},toDate:function(i){return i instanceof Date?i:isNaN(i)?/^\d+$/.test(i)?new Date(toInt(i)):(i=(i||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(i)):new Date(toInt(i))},isJust:function(i){return moment().diff(moment(this.toDate(i.at)),"minutes")<=150},isTwoDaysAgo:function(i){return moment().diff(moment(this.toDate(i.at)),"days")>1},clearCookies:function(){Cookies.remove("CurlyFomoNotifications"),Cookies.remove("CurlyFomoHashes"),Cookies.remove("CurlyFomoForce")},getLocation:function(i){return void 0!==i.city&&void 0!==i.country?i.city+", "+i.country:void 0!==i.country?i.country:"New York, United States"},cssNotification:function(i){if(void 0!==i&&null!==i&&void 0!==i.type)return"notification--"+i.type},getCookieHashes:function(){var i=this,a=Cookies.getJSON("CurlyFomoHashes");void 0!==a&&(i.expired_hashes=a)},isVisible:function(i){var a=this;return!a.isTrue(a.force)&&a.visible===i.hash},getNotifications:function(){var i=this,a=Cookies.getJSON("CurlyFomoNotifications");void 0!==a?(i.notifications=a,i.pushNotifications()):i.$http.get(window.CurlyFomo.rest_route+"curly-fomo/v2/get_notifications/").then(i.successCallback,i.errorCallback)},successCallback:function(i){var a=this;200===i.status&&(a.notifications=i.body,Cookies.set("CurlyFomoNotifications",i.body.slice(0,a.notifications_limit)),a.pushNotifications())},errorCallback:function(i){console.log(i)},pushNotifications:function(){var i=this;i.notifications.forEach(function(a,e){if(1===a.t)i.notifications_list.push({at:a.at,hash:a.ord,image:window.CurlyFomo.urls[a.id].icon,url:window.CurlyFomo.urls[a.id].url,city:void 0!==a.cty&&a.cty,country:void 0!==a.cou&&a.cou,detail:a.desc,type:"purchase"});else if(2===a.t)i.isTwoDaysAgo(a)||i.notifications_list.push({at:a.at,hash:a.id,image:window.CurlyFomo.urls[a.item].icon,url:window.CurlyFomo.urls[a.item].url,detail:window.CurlyFomo.urls[a.item].nice_name,type:"update"});else if(3===a.t){var n=i.getProductByTag(a.product);i.notifications_list.push({at:a.at,hash:a.id,image:void 0!==a.image&&a.image.length>0?a.image:n.icon,name:a.first_name+" "+a.last_name.slice(0,1),url:void 0!==n.url?n.url:"",detail:void 0!==n.nice_name?n.nice_name:"",type:"solved"})}else if(4===a.t){var n=i.getProductByFreemius(a.item);i.notifications_list.push({at:a.at,hash:a.id,image:void 0!==a.image&&a.image.length>0?a.image:!1!==n&&n.icon,country:i.getCountryName(a.cou),name:i.getFreemiusName(a),url:void 0!==n.url?n.url:"",detail:void 0!==n.nice_name?n.nice_name:"",type:"activated"})}}),i.checkNotifications()},getFreemiusName:function(i){var a="";return void 0!==i.fname&&i.fname.length>0&&(a+=i.fname),void 0!==i.lname&&i.lname.length>0&&(a+=" "+i.lname.slice(0,1)+"."),a},getProductByFreemius:function(i){var a=window.CurlyFomo.urls,e=!1;for(var n in a)a.hasOwnProperty(n)&&void 0!==a[n].freemius_id&&a[n].freemius_id===i&&(e=a[n]);return e},getProductByTag:function(i){var a=this,e=window.CurlyFomo.urls,n=!1;for(var o in e)e.hasOwnProperty(o)&&e[o].support_tag===i&&(n=e[o]);return n},setNotification:function(i){var a=this;!1!==i&&(a.visible=a.notifications_list[i].hash,a.counter=a.timeout)},removeNotification:function(i){var a=this;a.expired_hashes.push(a.visible),Cookies.set("CurlyFomoHashes",a.expired_hashes),void 0!==i&&!0===i?(Cookies.set("CurlyFomoForce",!0),a.force=!0):(a.visible=!1,a.count++,a.counter=a.count>1?2*a.timeout_next:a.timeout_next)},checkNotifications:function(){var i=this;if(i.counter>0)i.counter=i.counter-100;else if(!1===i.visible){if(i.notifications_list.length>0){var a=!1;i.notifications_list.forEach(function(e,n){!1===a&&-1===i.expired_hashes.indexOf(e.hash)&&(a=n)}),i.setNotification(a)}}else i.removeNotification();setTimeout(function(){i.checkNotifications()},100)}},computed:{cssClasses:function(){return this.notifications_list.length>0?"curly-formo--with-notifications":""},session_notifications:function(){var i=this;return[i.notifications[0],i.notifications[1]]}},filters:{timeago:function(i){return timeago().format(i)}}});